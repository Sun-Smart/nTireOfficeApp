<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Purchase Request</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div style="margin: 10px 0px;"><span style="font-size: 24px;margin: 10px ;color: black;" (click)="togglefilter()"><i
        class="fa fa-filter" *ngIf="filter" aria-hidden="true"></i></span></div>

  <ion-card *ngIf="showfilter">

    <!-- <ion-grid *ngIf="showlineItems===true"> -->
    <ion-grid>
      <ion-row>
        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">Branch</ion-label>
          <ion-input disabled="" [(ngModel)]="branchname"
            style=" background-color: #d4d4d4!important; display:inline-block;padding: 8px;" type="text"
            class="Input-text-field textareaField"></ion-input>
        </ion-col>
        <!-- <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">Branch</ion-label>
          <select style="padding: 10px;" [(ngModel)]="branchname" disabled=""
            style=" background-color: #d4d4d4!important; display:inline-block;padding: 8px;"
            class="Input-text-field textareaField">
            <option>&lt;&lt; Select &gt;&gt;</option>
        </select>
        </ion-col> -->
        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">PRS Date</ion-label>
          <ion-input type="text" [(ngModel)]="prsdate" disabled=""
            style=" background-color: #d4d4d4!important; display:inline-block;padding: 8px;"
            class="Input-text-field textareaField"></ion-input>
        </ion-col>
        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">PRS Code</ion-label>
          <ion-input type="text" [(ngModel)]="prscode" disabled=""
            style=" background-color: #d4d4d4!important; display:inline-block;padding: 8px;"
            class="Input-text-field textareaField"></ion-input>
        </ion-col>

        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">PRS Mode</ion-label>
          <select style="padding: 10px;color: black;
          font-weight: bold;" [(ngModel)]="prsmode" class="Input-text-field textareaField">
            <option value="undefined" selected disabled>&lt;&lt; Select &gt;&gt;</option>
            <option value="Q">Quotation</option>
            <option value="D">Direct</option>
            <option value="B">Blanket</option>
            <option value="T">Tender</option>
            <!-- <ion-option *ngFor="let items of Vendors_Item_uom" value="{{items.VAL}}">{{items.TEXT}}</ion-option> -->
          </select>
        </ion-col>


        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">Requested By</ion-label>
          <ion-input style="color: black;
          font-weight: bold;" type="text" disabled="" [(ngModel)]="requestby" class="Input-text-field textareaField"></ion-input>
        </ion-col>

        <!-- <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">Reference If Any</ion-label>
          <ion-input type="text" [(ngModel)]="referenceifany" class="Input-text-field textareaField"></ion-input>
        </ion-col> -->

        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">Reason For Purchase</ion-label>
          <select style="padding: 10px;color: black;
          font-weight: bold;" [(ngModel)]="reasonpurchase" class="Input-text-field textareaField">
            <option value="undefined" selected disabled>&lt;&lt; Select &gt;&gt;</option>
            <option value="1">Additional</option>
            <option value="2">New Project</option>
            <option value="3">New Office</option>
            <option value="4">Opening New Office</option>
          </select>
        </ion-col>
        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">Order Priority</ion-label>
          <select (click)="orderpriority()" style="padding: 10px; color: black;
          font-weight: bold;" [(ngModel)]="order"
            class="Input-text-field textareaField">
            <option value="undefined" selected disabled>&lt;&lt; Select &gt;&gt;</option>
            <option *ngFor="let items of getorder" value="{{items.val}}">{{items.text}}</option>
          </select>
        </ion-col>

        <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
          <ion-label class="plabel">RFP Comments</ion-label>
          <ion-textarea style="color: black;
          font-weight: bold;" type="text" [(ngModel)]="rfpcomments" class="Input-text-field textareaField rfp"></ion-textarea>
        </ion-col>



        <ion-row>
          <ion-col size="6">
            <div style="padding: 12px;display: flex;">
              <ion-checkbox class="checkboxbg" [(ngModel)]="release" [value]="true" (click)="checkbox()"></ion-checkbox>
              &nbsp; &nbsp;
              <ion-label class="ContentName">Release</ion-label>
            </div>
          </ion-col>
          <ion-col size="6">
            <div style="padding: 12px;display: flex;">

              <ion-label class="ContentName">Current Status : <span *ngIf="release===false" (click)="new()">New</span><span
                  *ngIf="release===true">Pending</span>
              </ion-label>
            </div>
          </ion-col>

        </ion-row>

        <!-- <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" style="text-align: center;">
          <ion-button (click)="showline()" class="ion-color-success" expand="block">
            <ion-icon style="color: #fff;" name="add-circle-outline"></ion-icon> Add Item
          </ion-button>
        </ion-col> -->

      </ion-row>
      <!-- for view mode -->
      <ion-card *ngFor="let items of expenseArray;let i=index">
        <ion-row>

          <ion-col size-sm="8" size="8" size-md="8" size-lg="8" size-xl="8" class="leadscolumn">
            {{items.item_short_desc}}
          </ion-col>

          <ion-col size-sm="2" size="2" size-md="2" size-lg="2" size-xl="2" class="leadscolumn">
            <ion-label>
              <ion-icon (click)="edit(i)" style="color: green;" name="create-outline"></ion-icon>
            </ion-label>
          </ion-col>

          <ion-col size-sm="2" size="2" size-md="2" size-lg="2" size-xl="2" class="leadscolumn">
            <ion-label>
              <ion-icon *ngIf="showdel" (click)="delete(i)" routerLinkActive="router-link-active" style="color: red;"
                name="trash-outline"></ion-icon>
              <!-- <ion-icon style="color: red;" name="trash-outline"></ion-icon> -->
            </ion-label>
          </ion-col>

          <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            Category
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            : {{items.CATEGORY}}
          </ion-col>
          <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            Item/Service
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            : {{items.itemcode}}
          </ion-col>
          <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            QTY
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            : {{items.required_qty}}
          </ion-col>
          <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            Unit Price
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            : {{items.unit_price}}
          </ion-col>
          <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            Required Before
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            : {{items.exp_date}}
          </ion-col>
          <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            Net Price
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            : {{items.expected_cost}}
          </ion-col>
          <!-- <ion-col size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            itemdescription
          </ion-col>
          <ion-col style="font-weight: 600; color: black;" size-sm="6" size="6" size-md="6" size-lg="6" size-xl="6">
            {{items.item_short_desc}}
          </ion-col> -->
        </ion-row>
      </ion-card>




      <!-- <ion-card style="width: -webkit-fill-available;" > -->



      <!-- <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" style="text-align: center;">
          <ion-button (click)="showline()" class="ion-color-success" expand="block">
            <ion-icon style="color: #fff;" name="add-circle-outline"></ion-icon> Add Items
          </ion-button>
        </ion-col> -->
      <!-- close for view mode -->


      <!-- <ion-card *ngIf="showfilter"> -->
      <ion-grid *ngIf="showlineItems===false">
        <ion-card-header class="card_header1">
          <ion-row>
            <ion-col>
              <ion-label style="color:white ; text-align: center;">List Items</ion-label>
            </ion-col>
            <!-- <ion-col size="3">
              <ion-label class="card_header_text">
                <ion-icon  (click)="close()"  style="color: red; margin-left: 40px;" name="close-circle-outline"></ion-icon>
              </ion-label>
            </ion-col> -->
          </ion-row>
        </ion-card-header>

        <ion-row>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
            <ion-label class="plabel">Category</ion-label>
            <select  [(ngModel)]="Category" (ngModelChange)="getItemDetail($event)" style="padding: 10px;"
              class="Input-text-field textareaField">
              <option value="undefined" selected>&lt;&lt; Select &gt;&gt;</option>
              <option value="I">Items</option>
              <option value="S">Service</option>
            </select>
          </ion-col>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="showitem">
            <ion-label class="plabel">Item/Service<span style="color:red;margin-left: 5px;">*</span></ion-label>
            <select style="padding: 10px;" [(ngModel)]="itemcode" class="Input-text-field textareaField">
              <option>&lt;&lt; Select &gt;&gt;</option>
              <option>System maintenance</option>
              <option>Repairing Service</option>
              <!-- <option *ngFor="let items of getdata1" value="{{items.item_Code}}">
                {{items.item_Code}}</option> -->
            </select>
          </ion-col>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="hideitem">
            <ion-label class="plabel">Item/Service<span style="color:red;margin-left: 5px;">*</span></ion-label>
            <ion-searchbar [(ngModel)]="itemcode" type="text" debounce="500" (ionInput)="getItems($event)">
            </ion-searchbar>
            <ion-list class="ContentName" *ngIf="isItemAvailable" class="searchlist"
              [ngStyle]="{'height':getdataitem.length >0?'90px':'0px'}">
              <ion-item class="ContentName" *ngFor="let items of getdataitem" style="background-color: white !important;
             " (click)="fetchreconcilation(items)">
                <!-- {{ item.id }} - {{ item.desc }} -->
                {{ items}}
              </ion-item>
            </ion-list>
          </ion-col>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="hideitem">
            <ion-label class="plabel">Description</ion-label>
            <ion-input placeholder=" " disabled="" id="textareaID" [(ngModel)]="Description"
              class="Input-text-field textareaField"
              style=" width:100%;background-color: #d4d4d4!important; color: black; font-weight: bold; height: 70px; display:inline-block;padding: 8px;"
              maxlength="150" required=""></ion-input>

            <!-- (ionSelect)="resize()" -->
            <!-- (keyup)="checkTestPressure(this)" -->
            <!-- [(ngModel)]="VendorQuot.remarks" -->
            <!-- <span class="customCounter">{{150 - VendorQuot.remarks.length}}</span> -->
          </ion-col>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="showitem">
            <ion-label class="plabel">Description</ion-label>
            <ion-textarea placeholder=" " [(ngModel)]="Description" id="textareaID"
              class="Input-text-field textareaField" style="width:100%; " maxlength="150" required=""></ion-textarea>
            <!-- (ionSelect)="resize()" -->
            <!-- (keyup)="checkTestPressure(this)" -->
            <!-- [(ngModel)]="VendorQuot.remarks" -->
            <!-- <span class="customCounter">{{150 - VendorQuot.remarks.length}}</span> -->
          </ion-col>



          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="hideitem">
            <ion-label class="plabel">QTY<span style="color:red;margin-left: 5px;">*</span></ion-label>
            <ion-input type="number" [(ngModel)]="qty"  (click)="qtymethod()" class="Input-text-field textareaField"></ion-input>
          </ion-col>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="showitem">
            <ion-label class="plabel">QTY<span style="color:red;margin-left: 5px;">*</span></ion-label>
            <ion-input type="number" [(ngModel)]="qty"  (click)="qtymethod()" class="Input-text-field textareaField"></ion-input>
          </ion-col>

          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="hideitem">
            <ion-label class="plabel">Unit Price</ion-label>
            <ion-input type="number" disabled="" [(ngModel)]="unitprice"
              style=" background-color: #d4d4d4!important; color: black; font-weight: bold; display:inline-block;padding: 8px;"
              class="Input-text-field textareaField">
            </ion-input>
          </ion-col>
          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="showitem">
            <ion-label class="plabel">Unit Price</ion-label>
            <ion-input type="number" [(ngModel)]="unitprice" class="Input-text-field textareaField"></ion-input>
          </ion-col>

          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
            <ion-label class="plabel">Net Price</ion-label>
            <ion-input type="text" value="{{qty*unitprice}}" [(ngModel)]="netprice" disabled=""
              style=" background-color: #d4d4d4!important; color: black; font-weight: bold; display:inline-block;padding: 8px;"
              class="Input-text-field textareaField"></ion-input>
          </ion-col>

          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4">
            <ion-label class="plabel">Required Before <span style="color:red;margin-left: 5px;">*</span></ion-label>
            <ion-input type="date" [(ngModel)]="Requiredbefore" class="Input-text-field textareaField"></ion-input>
            <!-- [(ngModel)]="VendorQuot.qty" -->
          </ion-col>


          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="hideitem">
            <ion-label class="plabel"> Item Detailed Description</ion-label>
            <ion-input placeholder=" " disabled="" id="textareaID" [(ngModel)]="itemdescription"
              class="Input-text-field textareaField"
              style=" width:100%;background-color: #d4d4d4!important; color: black; font-weight: bold; height: 70px; display:inline-block;padding: 8px;"
              maxlength="150" required=""></ion-input>
            <!-- (ionSelect)="resize()" -->
            <!-- (keyup)="checkTestPressure(this)" -->
            <!-- [(ngModel)]="VendorQuot.remarks" -->
            <!-- <span class="customCounter">{{150 - VendorQuot.remarks.length}}</span> -->
          </ion-col>

          <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" *ngIf="showitem">
            <ion-label class="plabel"> Item Detailed Description</ion-label>
            <ion-textarea placeholder=" " id="textareaID" [(ngModel)]="itemdescription"
              class="Input-text-field textareaField" style="width:100%;" maxlength="150" required=""></ion-textarea>
            <!-- (ionSelect)="resize()" -->
            <!-- (keyup)="checkTestPressure(this)" -->
            <!-- [(ngModel)]="VendorQuot.remarks" -->
            <!-- <span class="customCounter">{{150 - VendorQuot.remarks.length}}</span> -->
          </ion-col>


          <!-- <ion-col size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" style="text-align: center;">
              <ion-button (click)="showline()" class="ion-color-success" expand="block">
                <ion-icon style="color: #fff;" name="add-circle-outline"></ion-icon> Add Item
              </ion-button>
            </ion-col> -->
          <!--
            <ion-col style="text-align: center;">
              <ion-button class ="ion-color-primary" expand="block">List</ion-button>
            </ion-col> -->
          <ion-col style="text-align: center;" *ngIf="showsavebtn">
            <ion-button (click)="showline()" class="ion-color-success" expand="block" [disabled]="this.itemcode == null ||  this.qty == null || this.Requiredbefore  == undefined">Save</ion-button>
          </ion-col>
          <ion-col style="text-align: center;">
            <ion-button (click)="close()" class="ion-color-danger" expand="block">Close</ion-button>
          </ion-col>

          <!-- <ion-col  size-sm="6" size="12" size-md="6" size-lg="6" size-xl="4" style="text-align: center;">
              <ion-button class ="ion-color-success" expand="block"><ion-icon style="color: #fff;" name="add-circle-outline"></ion-icon> Add Item</ion-button>
            </ion-col> -->
        </ion-row>
      </ion-grid>
      <!-- </ion-card> -->
      <ion-row *ngIf="showbtn">
        <ion-col style="text-align: center;">
          <ion-button (click)="Additems()" class="ion-color-primary" expand="block">
            <ion-icon style="color: #fff;" name="add-circle-outline"></ion-icon> Add Items
          </ion-button>
        </ion-col>
        <ion-col style="text-align: center;" *ngIf="showcancel">
          <ion-button (click)="clear()" class="ion-color-danger" expand="block">Clear</ion-button>
        </ion-col>
        <ion-col style="text-align: center;" *ngIf="showsubmit">
          <ion-button (click)="submit()" class="ion-color-success" expand="block">Submit</ion-button>
        </ion-col>
        <ion-col style="text-align: center;" *ngIf="showupdate">
          <ion-button (click)="update()" class="ion-color-success" expand="block">Update</ion-button>
        </ion-col>
        <!-- <ion-col style="text-align: center;">
          <ion-button class="ion-color-success" expand="block">New</ion-button>
        </ion-col> -->
      </ion-row>
    </ion-grid>
  </ion-card>
</ion-content>
<!-- <ion-button class="button button-small button-block  button-full button-balanced schedulebutn"
  color="success" expand="block" type="button" (click)="updateVendorDetails(VendorQuot)" disabled="(VendorQuot.transportcharge==undefined||VendorQuot.transportcharge==''  || VendorQuot.unitprice=='' || VendorQuot.unitprice==undefined ||
  VendorQuot.discount==undefined||VendorQuot.discount=='' || VendorQuot.deliverydate=='' || VendorQuot.deliverydate==undefined )" class="button button-assertive editbut">UPDATE</ion-button>
</ion-content> -->

<!-- for line Items  -->

<ion-footer>
  <ion-row>
    <ion-col size-sm="5" size="6" size-md="5" size-lg="5" size-xl="5">
      © SunSmart Global Inc
    </ion-col>
    <ion-col size-sm="5" size="6" size-md="5" size-lg="5" size-xl="5" style="text-align: right;">
      {{username}}
    </ion-col>
  </ion-row>
</ion-footer>
